1. 项目介绍围绕“需求->难点->解决方案”来说。

2. 面对“你有了解 xxx 吗？“，不要回答没实用过，直接回答了解一点。
3. 回答问题不要自行延伸问题，稍等看面试官是否深入提问，如果不深入提问，再自行延伸。

---

你好，我叫吴俊宇，中山大学 18 届计科研究生，目前在网易游戏现金流产品《大话西游手游》任职后台开发工程师。主要负责业务功能开发，和部分分布式组件的维护迭代，工作 2 年，0 事故。

之所以决定决定离开是因为：1，政府对于手游行业的打压，2，游戏的技术栈应用面偏窄，希望寻求更多的个人发展。

---

Q：如何优化？

A：先看 ELK 之类的分析日志，根据吞吐量找出系统中的瓶颈。可以考虑用 top / iotop / strace 先定性问题（io / too many syscalls / too many fsync / stupid impl），然后用 gprof 之类的工具进行分析，找到耗时较多部分。

如果只是 stupid impl 就很容易解决。有些算法本身的问题往往比较难解决，只能根据实际情况进行优化（比如我在百度做的）。某些问题可能有些套路，比如是否 hash 分布不合理，有些问题可以用 lazy approx solution，有些问题可以用视觉骗术。

如果是 io 量有问题：

1. 先排除掉是否有小文件，不合理频繁 rw 问题，随机寻道问题，
2. 考虑尽量客户端拦截无用请求，限制访问频率，
3. 动静分离，CDN，
4. 控制放到数据层的请求量，避免压垮数据层，系统繁忙直接拒绝请求（使用 MQ，自发拉取，控制处理量），
5. 使用缓存，但要注意缓存穿透（反复查找不存在对象）、击穿（短时间内重复查找同一对象）、雪崩问题（缓存同时过期）。

---

常见站点架构层次：

1. 浏览器
2. 站点：访问后端，拼 HTML 页面。
3. 服务：向上游屏蔽业务细节。
4. 数据：数据存储，如 MySQL。

优化方向：

1. 尽量将请求拦截在系统上游：请求量过大会压倒数据层，数据读写锁冲突严重，并发高响应慢。
2. 充分利用缓存（读多写少）。

优化细节：

1. 客户端拦截
   1. 良好 UI 设计
   2. 客户端限制（禁止重复点击）
2. 站点层拦截
   1. 限制访问频率，
   2. 缓存返回页面。
   3. 动静分离，CDN。
3. 服务层
   1. 控制放到数据层的请求量，避免压垮数据层。
   2. 使用 MQ，自发拉取，控制处理量。
   3. 使用缓存，但要注意缓存穿透（反复查找不存在对象）、击穿（短时间内重复查找同一对象）、雪崩问题（缓存同时过期）。

---

